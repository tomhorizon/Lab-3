<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: src/lab3main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">lab3main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file is Lab 3 for ME 405.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abc29c931bf1e198ff42177251111a2a4"><td class="memItemLeft" align="right" valign="top"><a id="abc29c931bf1e198ff42177251111a2a4" name="abc29c931bf1e198ff42177251111a2a4"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>lab3main.motor1task</b> (shares)</td></tr>
<tr class="separator:abc29c931bf1e198ff42177251111a2a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20d92976abf9627d7817106cfafd3fc"><td class="memItemLeft" align="right" valign="top"><a id="ab20d92976abf9627d7817106cfafd3fc" name="ab20d92976abf9627d7817106cfafd3fc"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>lab3main.motor2task</b> (shares)</td></tr>
<tr class="separator:ab20d92976abf9627d7817106cfafd3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a674d6d4c43f77d20f9fca1dfdaee3b"><td class="memItemLeft" align="right" valign="top"><a id="a8a674d6d4c43f77d20f9fca1dfdaee3b" name="a8a674d6d4c43f77d20f9fca1dfdaee3b"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>lab3main.main</b> ()</td></tr>
<tr class="separator:a8a674d6d4c43f77d20f9fca1dfdaee3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file is Lab 3 for ME 405. </p>
<p>The goal of this exercise was to simultaneously control two 12V DC motor system as individual servos with proportional controllers using a real-time scheduler. The scheduler allows us to use multitasking by scheduling the sequence in which tasks are carried out in correspondance to the preset frequency.</p>
<p>The motors are connected to an external power supply and a STM32 PWM output. The built-in encoder provides position feedback and uses STM-32 timers. At the beginning of the program sequence, controller parameters are sent through UART serial communication to the STM32, initializing the control algorithm.</p>
<p>The proportional controller is the most simple closed-loop controller, using just one variable (Kp, the controller constant), to direcetly impact the amount of "effort" that the motor applies. The "effort" applied to the motor is a duty cycle percentage. To find the required duty cycle, the algorithm calculates the difference between the setpoint (goal) and the actual position and multiplies it by the proportional controller constant. A higher error implies a higher corrective effort, while a lower error applied a lower corrective effort. Eventually, the error becomes negligible and no further correction is needed.</p>
<p>This program uses 3 classes: MotorDriver, EncoderReader, and Control. After defining the pins and starting the timer channels, the control loop waits for motor parameters. Once the controller parameters (Kp and setpt) are received from the PC. The encoder reads the position, which is used by the controller to calculate the required duty cycle, which is applied to the motor. This loop runs for 3 seconds.</p>
<p>Dr. Ridgley's cotask class and functions are used to implement multitasking. This allowed us to accomplish the above tasks on two motors simultaneously.</p>
<dl class="section author"><dt>Author</dt><dd>Tom Taylor </dd>
<dd>
Jonathan Fraser </dd>
<dd>
Dylan Weiglein</dd></dl>
<dl class="section date"><dt>Date</dt><dd>2022-02-15 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
